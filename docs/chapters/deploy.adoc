== Deploying Applications to WildFly

=== Command Line Interface (jboss-cli)

`bin/jboss-cli.sh` or `jboss-cli.bat` are Command Line Interface management tools for a standalone server or managed domain. It allows a user to connect to the domain controller or a standalone server and execute management operations.

What's new in WildFly 8 ?

==== Interactive
. Default host/port
+
. Optionally connect to a different host/port
+
. Tab completion of commands
+
. Explain ls, tab, :
+
. Show how to read a simple attribute value using :read-attribute(name=release-version)
+
. Read the port on which the host is running /socket-binding-group=standard-sockets/socket-binding=http:read-attribute(name=bound-port)
+
. `deploy` to deploy an application
+
. `deployment-info` to check the deployment status
+
. `batch` to batch up create-jdbc-resource, create-jms-resource, and deploy
+
. Read details about Data Source before/after accessing the application:
+
[source, shell]
/subsystem=datasources/data-source=ExampleDS/statistics=pool:read-attribute(name=ActiveCount)
+
. How to change default HTTP and management port
+
[source, json]
----
/socket-binding-group=standard-sockets/socket-binding=http:write-attribute(name=port,value=8090)
{
    "outcome" => "success",
    "response-headers" => {
        "operation-requires-reload" => true,
        "process-state" => "reload-required"
    }
}
----

==== Non-interactive

[source]
----
./bin/jboss-cli.sh --connect --command="deploy javaee7-sample.war --force"
----

=== Admin Console

The Admin Console is a web-based administration console and available at http://localhost:9990/console. A new user in the management realm needs to be added before the admin console can be accessed.

==== Adding user in management realm

A new user can be added in the management realm using `bin/add-user.sh` script. This can be done non-interactively by giving the following command:
[source, text]
----
./bin/add-user.sh -u sheldon -p baz1ngaa!
----

The output of the command looks like:

[source]
----
Added user 'sheldon' to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/standalone/configuration/mgmt-users.properties'
Added user 'sheldon' to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/domain/configuration/mgmt-users.properties'
----

The directory names `standalone' and `domain' indicate that the user is added to both standalone instance and managed domain. The file name indicates that it is added to the management realm.

TIP: A user can be added to application realm by including `-a` switch.

Alternatively, the user can be added interactively by invoking the script and entering the values on the prompt as shown:

[source]
----
./bin/add-user.sh

What type of user do you wish to add? 
 a) Management User (mgmt-users.properties) 
 b) Application User (application-users.properties)
(a):

Enter the details of the new user to add.
Using realm 'ManagementRealm' as discovered from the existing property files.
Username : sheldon
Password requirements are listed below. To modify these restrictions edit the add-user.properties configuration file.
 - The password must not be one of the following restricted values {root, admin, administrator}
 - The password must contain at least 8 characters, 1 alphanumeric character(s), 1 digit(s), 1 non-alphanumeric symbol(s)
 - The password must be different from the username
Password : baz1ngaa!
Re-enter Password : baz1ngaa!
What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]: 
About to add user 'sheldon' for realm 'ManagementRealm'
Is this correct yes/no? *yes*
Added user 'sheldon' to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/standalone/configuration/mgmt-users.properties'
Added user 'sheldon' to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/domain/configuration/mgmt-users.properties'
Added user 'sheldon' with groups  to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/standalone/configuration/mgmt-groups.properties'
Added user 'sheldon' with groups  to file '/Users/arungupta/workspaces/wildfly/build/target/wildfly-8.0.0.Final-SNAPSHOT/domain/configuration/mgmt-groups.properties'
Is this new user going to be used for one AS process to connect to another AS process? 
e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server EJB calls.
yes/no? no
----

Now accessing the console at http://localhost:9990/console shows the web page:

image:images/deploy-admin-console.png[Admin Console]

=== File system

Copying file to standalone/deployments (talk about marker files ??)

=== Curl
